<?php

use Slayer\Test\Model\OrderModel;
use Slayer\Test\ViewModel\ExtraInfo;

/** @var Slayer\Test\Block\Order $block */
$blockName = $block->getNameInLayout();

///** @var Slayer\Test\Model\ResourceModel\Order\Collection $orderCollection */
//$orderCollection = $block->getOrderCollection();
//$sqlString = $orderCollection->getSelect()->__toString();

$orders = $block->getOrders();

/** @var ExtraInfo $viewModel */
$viewModel = $block->getData('view_model');
?>

<h1 class="custom-block block-name"><?= __('My Orders Collection: '); ?><?= $blockName ?>!</h1>
<!--<h2 class="sql-query">Query was:
    <span><?/*= $sqlString */?></span>
</h2>-->
<?php if ($viewModel && $viewModel->getCurrentDate()): ?>
    <h3 class="current-date"><?= __('Current date is: %1', $viewModel->getCurrentDate()); ?></h3>
<?php endif; ?>
<div class="container">
    <?php if ($orders): ?>
        <?php foreach ($orders as $order): ?>
            <?php /** @var OrderModel $order */ ?>
            <div class="customer">
                <h3 class="user-id customer-item"><?= __('User ID: '); ?><span class="order-span"><?= $order->getUserId() ?></span></h3>
                <h3 class="order-id customer-item"><?= __('Order ID: '); ?><span class="order-span"><?= $order->getOrderId() ?></span></h3>
                <h3 class="order-name customer-item"><?= __('Order name: '); ?><span class="order-span"><?= $order->getOrderName() ?></span></h3>
                <h3 class="created-at customer-item"><?= __('Created At: '); ?><span class="order-span"><?= $order->getCreatedAt() ?></span></h3>
                <h3 class="price customer-item"><?= __('Price: '); ?><span class="order-span"><?= $order->getPrice() ?> грн.</span></h3>
                <p>
                    <a class="go-back order-go-back" href="<?= $block->getUrl('test') ?>"
                       onmouseover="this.style.color='#4ca939';" onmouseout="this.style.color='darkblue';"><?= __('Go Back'); ?></a>
                </p>
                <hr>
            </div><br>
        <?php endforeach; ?>
    <?php endif; ?>
</div>