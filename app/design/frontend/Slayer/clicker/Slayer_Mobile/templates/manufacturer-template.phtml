<?php
use Slayer\Mobile\Block\Manufacturer;
use Slayer\Mobile\Api\Data\ManufacturerInterface;
use Slayer\Mobile\Model\ManufacturerModel;
use Slayer\Mobile\ViewModel\ExtraInfo;

/** @var Manufacturer $block */
$blockName = $block->getNameInLayout();
/** @var ManufacturerInterface[] $manufacturers */
$manufacturers = $block->getManufacturers();
/** @var ExtraInfo $viewModel */
$viewModel = $block->getData('view_model');
?>

<h1 class="manufacturer-block-name"><?= $blockName ?>!</h1>
<div class="manufacturer-container">
    <?php if ($viewModel && $viewModel->getCurrentDate()): ?>
        <h3 class="view-model"><?= __('Now is ')?><span><?= __($viewModel->getCurrentDate()) ?></span></h3>
    <?php endif; ?>
    <?php if (!empty($manufacturers)): ?>
        <?php foreach ($manufacturers as $manufacturer): ?>
            <?php /** @var ManufacturerModel $manufacturer */ ?>
            <div class="manufacturer">
                <h3 class="name"><?= $manufacturer->getName() ?></h3>
                <h3 class="surname"><?= __('Surname') ?>: <span><?= $manufacturer->getDirector() ?></span></h3>
                <h3 class="phone"><?= __('Phone') ?>: <span>+<?= $manufacturer->getPhoneNumber() ?></span></h3>
                <h3 class="email"><?= __('Email') ?>: <span><?= $manufacturer->getEmail() ?></span></h3>
                <h3 class="address"><?= __('Address') ?>: <span><?= $manufacturer->getAddress() ?></span></h3>
                <h3 class="foundation-date"><?= __('Foundation Date') ?>: <span><?= $manufacturer->getFoundationDate() ?></span></h3>
                <p>
                <a class="manufacturer-btn read-more" href="<?= $block->getUrl('mobile/index/manufacturers', ['manufacturer_id' => $manufacturer->getId()])?>"><?= __('Read more about the ') ?><?= $manufacturer->getName() ?><?= __(' Phones') ?></a>
                </p><hr>
            </div><br>
        <?php endforeach; ?>
    <?php else: ?>
        <div class="error-block">
            <h3 class="error-message"><?= __("There are no manufacturers found.") ?></h3>
        </div>
    <?php endif; ?>
</div>